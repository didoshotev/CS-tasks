<div class="wrapper">
  <h1 class="heading">Create new process</h1>
</div>


<mat-horizontal-stepper linear #stepper>

  <mat-step [stepControl]="firstFormGroup">
    <form [formGroup]="firstFormGroup">
      <ng-template matStepLabel>Fill the process information</ng-template>
      <mat-form-field appearance="fill">
        <mat-label>Process name</mat-label>
        <input matInput formControlName="firstCtrl"> <!-- required -->
      </mat-form-field>
      <div class="radio-container">
        <h2>Process Type</h2>   
        <div class="radio-item">
          <input formControlName="linear" type="radio" id="linear" value="linear">
          <label class="radio-label" for="linear">linear</label>
        </div>
        
        <div class="radio-item">
          <input formControlName="paralel" type="radio" id="paralel" value="paralel">
          <label class="radio-label" for="paralel">paralel</label>
        </div>
      </div>
        
        <div>
        <button mat-flat-button matStepperNext color="primary">Next</button>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="stepsFormGroup">
    <form [formGroup]="stepsFormGroup">
      <ng-template matStepLabel>Choose process steps</ng-template>
      <div>
        <h2>Choose a step type</h2>
        <ul>
          <ng-container *ngFor="let item of stepsTextMatcher | keyvalue">

            <li class="steps-list-item">
              <button mat-raised-button 
              class="steps-list-item-btn" color="primary"
              [data-type]=item.key
              #buttonRef
              (click)="onHandleStepClick(buttonRef)"
              matStepperNext
              >{{ item.value }}</button>
            </li>

          </ng-container>
          
        </ul>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="stepsFormGroup" >
    <form [formGroup]="stepsFormGroup">
      <ng-template matStepLabel>Fill the blank</ng-template>
      <div>
        <h2>Fill the blank</h2>
        <ng-container *ngFor="let stepGroup of steps.controls; let i = index">
          <div class="step-form-row" [formGroup]="stepGroup">
            
            <mat-form-field class="mr30" appearance="fill" *ngFor="let stepInput of stepInputs;">
                <mat-label> {{ stepInput.label }} </mat-label>
                <input matInput class="textField" [type]="stepInput.type"
                 [name]="stepInput.name" [id]="stepInput.name"
                 [formControlName]="stepInput.name">
            </mat-form-field>

          </div>
        </ng-container>
      </div>

      <div>
        <button mat-flat-button color="primary" class="mr30" matStepperPrevious>Back</button>
        <button mat-flat-button color="primary" matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>

  <mat-step>
    <ng-template matStepLabel>Done</ng-template>
    <h1>Your process is ready</h1>
    <div>
      <button mat-flat-button color="primary" (click)="onHandleSubmit()">Submit</button>
    </div>
  </mat-step>

</mat-horizontal-stepper>